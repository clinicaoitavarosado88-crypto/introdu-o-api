{
	"info": {
		"_postman_id": "listar-agendas-json-api-v1",
		"name": "Clínica Oitava - Listar Agendas (JSON Estruturado)",
		"description": "Endpoint para listar agendas em formato JSON estruturado (substitui o retorno HTML). Retorna informações completas incluindo: médicos, especialidades, procedimentos, horários por dia da semana, vagas, convênios aceitos e avisos importantes.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Consultas - Listar por Especialidade",
			"item": [
				{
					"name": "Listar Cardiologistas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta",
									"description": "Tipo da agenda (obrigatório)"
								},
								{
									"key": "nome",
									"value": "Cardiologista",
									"description": "Nome da especialidade"
								}
							]
						},
						"description": "Lista todas as agendas de consultas para a especialidade Cardiologia"
					},
					"response": []
				},
				{
					"name": "Listar Clínico Geral",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Clínico Geral",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Clínico Geral"
								}
							]
						},
						"description": "Lista todas as agendas de consultas para Clínico Geral"
					},
					"response": []
				},
				{
					"name": "Listar Endocrinologista",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Endocrinologista",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Endocrinologista"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "Listar agendas do tipo CONSULTA filtradas por especialidade médica"
		},
		{
			"name": "2. Procedimentos - Listar por Tipo",
			"item": [
				{
					"name": "Listar Ultrassonografias",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=procedimento&nome=Ultrassonografia",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "procedimento"
								},
								{
									"key": "nome",
									"value": "Ultrassonografia"
								}
							]
						},
						"description": "Lista todas as agendas de procedimentos do tipo Ultrassonografia"
					},
					"response": []
				},
				{
					"name": "Listar Ecocardiogramas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=procedimento&nome=Ecocardiograma",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "procedimento"
								},
								{
									"key": "nome",
									"value": "Ecocardiograma"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "Listar agendas do tipo PROCEDIMENTO filtradas por grupo de exames"
		},
		{
			"name": "3. Filtros - Por Dia da Semana",
			"item": [
				{
					"name": "Cardiologistas - Segunda-feira",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista&dia=Segunda",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Cardiologista"
								},
								{
									"key": "dia",
									"value": "Segunda",
									"description": "Dia da semana (opcional)"
								}
							]
						},
						"description": "Lista cardiologistas que atendem às segundas-feiras"
					},
					"response": []
				},
				{
					"name": "Cardiologistas - Quarta-feira",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista&dia=Quarta",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Cardiologista"
								},
								{
									"key": "dia",
									"value": "Quarta"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Clínico Geral - Sexta-feira",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Clínico Geral&dia=Sexta",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Clínico Geral"
								},
								{
									"key": "dia",
									"value": "Sexta"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "Filtrar agendas por dia da semana específico"
		},
		{
			"name": "4. Filtros - Por Cidade/Unidade",
			"item": [
				{
					"name": "Cardiologistas - Zona Norte",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista&cidade=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Cardiologista"
								},
								{
									"key": "cidade",
									"value": "1",
									"description": "ID da cidade/unidade (opcional)"
								}
							]
						},
						"description": "Lista cardiologistas da unidade Zona Norte (ID=1)"
					},
					"response": []
				}
			],
			"description": "Filtrar agendas por cidade/unidade específica"
		},
		{
			"name": "5. Filtros Combinados",
			"item": [
				{
					"name": "Cardiologista - Segunda - Zona Norte",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista&dia=Segunda&cidade=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Cardiologista"
								},
								{
									"key": "dia",
									"value": "Segunda"
								},
								{
									"key": "cidade",
									"value": "1"
								}
							]
						},
						"description": "Combina múltiplos filtros: tipo + especialidade + dia da semana + cidade"
					},
					"response": []
				}
			],
			"description": "Usar múltiplos filtros simultaneamente"
		},
		{
			"name": "6. Casos de Erro",
			"item": [
				{
					"name": "Erro - Sem parâmetro tipo",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?nome=Cardiologista",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "nome",
									"value": "Cardiologista"
								}
							]
						},
						"description": "Deve retornar HTTP 400 - parâmetro 'tipo' é obrigatório"
					},
					"response": []
				},
				{
					"name": "Erro - Especialidade não encontrada",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=EspecialidadeInexistente",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "EspecialidadeInexistente"
								}
							]
						},
						"description": "Deve retornar HTTP 404 - especialidade não encontrada"
					},
					"response": []
				},
				{
					"name": "Erro - Procedimento não encontrado",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=procedimento&nome=ProcedimentoInexistente",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "procedimento"
								},
								{
									"key": "nome",
									"value": "ProcedimentoInexistente"
								}
							]
						},
						"description": "Deve retornar HTTP 404 - procedimento não encontrado"
					},
					"response": []
				},
				{
					"name": "Erro - Sem autenticação",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Cardiologista"
								}
							]
						},
						"description": "Deve retornar HTTP 401 - token de autenticação ausente"
					},
					"response": []
				}
			],
			"description": "Testar casos de erro e validações"
		},
		{
			"name": "7. Exemplo de Resposta Completa",
			"item": [
				{
					"name": "Ver Estrutura Completa da Resposta",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer OWY2NGE0YTQtNGQ0MS00ZjVkLWI3ZTUtOGY2ZDZhNGE0YTQ0",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/listar_agendas_json.php?tipo=consulta&nome=Cardiologista",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"listar_agendas_json.php"
							],
							"query": [
								{
									"key": "tipo",
									"value": "consulta"
								},
								{
									"key": "nome",
									"value": "Cardiologista"
								}
							]
						},
						"description": "Exemplo completo mostrando toda a estrutura JSON retornada:\n\n```json\n{\n  \"status\": \"sucesso\",\n  \"total_agendas\": 1,\n  \"filtros_aplicados\": {\n    \"tipo\": \"consulta\",\n    \"nome\": \"Cardiologista\",\n    \"dia_semana\": null,\n    \"cidade_id\": null\n  },\n  \"agendas\": [\n    {\n      \"id\": 178,\n      \"tipo\": \"consulta\",\n      \"medico\": {\n        \"id\": 2780,\n        \"nome\": \"LIDIANE AMARAL DE MEDEIROS\"\n      },\n      \"especialidade\": {\n        \"id\": 5,\n        \"nome\": \"Clínico Geral\"\n      },\n      \"localizacao\": {\n        \"unidade_id\": 1,\n        \"unidade_nome\": \"Zona Norte\",\n        \"sala\": \"201\",\n        \"telefone\": \"(84) 3234-5678\"\n      },\n      \"configuracoes\": {\n        \"tempo_estimado_minutos\": 15,\n        \"idade_minima\": null,\n        \"possui_retorno\": true,\n        \"atende_comorbidade\": false\n      },\n      \"limites\": {\n        \"vagas_dia\": 20,\n        \"retornos_dia\": 5,\n        \"encaixes_dia\": 3\n      },\n      \"horarios_por_dia\": {\n        \"Segunda\": [\n          {\n            \"periodo\": \"manha\",\n            \"inicio\": \"08:00\",\n            \"fim\": \"12:00\"\n          },\n          {\n            \"periodo\": \"tarde\",\n            \"inicio\": \"14:00\",\n            \"fim\": \"18:00\"\n          }\n        ],\n        \"Quarta\": [\n          {\n            \"periodo\": \"continuo\",\n            \"inicio\": \"07:00\",\n            \"fim\": \"13:00\"\n          }\n        ]\n      },\n      \"vagas_por_dia\": {\n        \"Segunda\": 20,\n        \"Quarta\": 15\n      },\n      \"convenios\": [\n        {\n          \"id\": 1,\n          \"nome\": \"SUS\"\n        },\n        {\n          \"id\": 24,\n          \"nome\": \"AMIL\"\n        },\n        {\n          \"id\": 962,\n          \"nome\": \"PARTICULAR\"\n        }\n      ],\n      \"avisos\": {\n        \"observacoes\": \"NAO ESTA ATENDENDO AMIL\",\n        \"informacoes_fixas\": \"ATENDE SAUDE BRASIL CRM 5991\",\n        \"orientacoes\": \"Trazer exames anteriores\"\n      }\n    }\n  ]\n}\n```"
					},
					"response": []
				}
			],
			"description": "Ver exemplo completo da estrutura JSON retornada"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://sistema.clinicaoitavarosado.com.br/oitava/agenda",
			"type": "string"
		}
	]
}
